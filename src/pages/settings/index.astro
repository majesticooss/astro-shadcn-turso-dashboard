---
import SettingsPage from "@/components/routes/settings/settings-page";
import AuthenticatedLayout from "@/layouts/AuthenticatedLayout.astro";
import { organization } from "@/lib/authClient";
import { checkPageRedirect } from "@/lib/authUtils";
import { getPageData } from "@/lib/authUtils";

const pageData = await getPageData(Astro);

if (pageData.redirect) {
	return Astro.redirect(pageData.redirect);
}

const title = "Settings";
---

<AuthenticatedLayout {...pageData} title={title}>
	<SettingsPage
		client:load
		user={pageData.user}
		member={pageData.member as Member}
	/>
</AuthenticatedLayout>
