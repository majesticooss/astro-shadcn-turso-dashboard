---
import CourseDetailPage from "@/components/routes/academy/course-detail-page";
import AuthenticatedLayout from "@/layouts/AuthenticatedLayout.astro";
import { getPageData } from "@/lib/authUtils";

const pageData = await getPageData(Astro);

if (pageData.redirect) {
	return Astro.redirect(pageData.redirect);
}

const { id } = Astro.params;
const title = "Course";
---

<AuthenticatedLayout {...pageData} title={title}>
	<CourseDetailPage courseId={id} client:load />
</AuthenticatedLayout>
