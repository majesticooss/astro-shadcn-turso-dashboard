---
import { fade } from "astro:transitions";
import { DashboardWrapper } from "@/components/routes/dashboard/DashboardWrapper";
import BaseLayout from "@/layouts/BaseLayout.astro";
import { sidebarLinks } from "config";

const currentPath = Astro.url.pathname;
const { session, user } = Astro.locals;

const filteredLinks = sidebarLinks.map((section) => ({
	...section,
	items: section.items.filter(({ authorizeOnly }) => !authorizeOnly),
}));
---

<BaseLayout>
	<DashboardWrapper
		links={filteredLinks}
		currentPath={currentPath}
		client:load
	>
		<slot />
	</DashboardWrapper>
</BaseLayout>
